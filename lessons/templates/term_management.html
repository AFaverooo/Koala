<html>
<h1>Term Management Page</h1>

<head>
    <!-- <meta charset="utf-8"> -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
</head>

<style>
    table {
        border-collapse: collapse;
        width: 100%;
        border: 1px solid;
    }

    th,
    td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
        border: 1px solid;
    }

    tr:hover {
        background-color: gray;
    }

    .button {
        background-color: #1183ca;
        padding: 10px 10px;
        font-size: 12px;
        color: white;
        font-weight: bold;
        border-radius: 10px;
        border: none;
    }

    div {
        padding: 0.5% 1% 0% 1%;
    }
</style>

{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <div class="alert alert-{{ message.level_tag }}" role="alert">{{ message }}</div>
    {% endfor %}
</ul>
{% endif %}

<a href='{% url 'add_term_page' %}'>
    <button type="button" class="btn button">Add term</button>
</a>

<div>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">Term</th>
                <th scope="col">Start date</th>
                <th scope="col">End Date</th>
                <th scope="col">Edit</th>
            </tr>
        </thead>
        <tbody>

            {% for term in terms_list %}
                <tr>
                    <th scope="row">{{ term.term_number }}</th>
                    <td>{{ term.start_date }}</td>
                    <td>{{ term.end_date }}</td>
                    <td>
                        <a href='{% url 'edit_term_details_page' term.term_number %}'>
                            <button type="button" class="btn button"><i class="bi bi-pencil-square"></i></button>
                        </a>

                        <a>
                            <button type="button" id="myBtn{{term.term_number}}" class="btn button3" data-toggle="modal" data-target="#myModal{{term.term_number}}"><i class="bi bi-trash"></i></button>
          
                            <!-- Modal -->
                            <div class="modal fade" id="myModal{{term.term_number}}" role="dialog">
                              <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                                <div class="modal-content">
                                  <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                    <h3 class="modal-title">Are sure you want to delete the following Term:</h3>
                                  </div>
                                  <div class="modal-body">
                                    <p>
                                      Term Number: {{term.term_number}} <br>
                                      Start date: {{ term.start_date }}<br>
                                      End date: {{ term.end_date }}<br>
                                    </p>
                                  </div>
                                  <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          
                                    <a href='{% url 'delete_term' term.term_number %}' method="post">
                                      <button type="button" class="btn button3" data-toggle="modal" data-target="#myModal{{term.term_number}}">Delete</button>
                                    </a>
          
                                  </div>
                                </div>
                              </div>
                            </div>
                          </a>
                    </td>

            {% endfor %}
                </tr>
        </tbody>
    </table>
</div>

</html>