{% load static %}
{{ form.media }}
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

{% load bootstrap4 %}
{% bootstrap_css %}
{% bootstrap_javascript jquery='full' %}


<h1> THIS IS THE STUDENT FEED PAGE</h1>

<p> <a href = '{% url 'requests_page' %}' class = "btn btn-lg btn-secondary"> Book lessons  </a></p>

<p> <a href = '{% url 'balance' %}' class = "btn btn-lg btn-secondary"> Check balance and Transaction  </a></p>

{% for message in messages %}
<div class="alert alert-{{ message.level_tag }}" role="alert">
  {{ message }}
</div>

{% endfor %}
<h2>{{greeting}}</h2>

{%  if unfulfilled_requests|length > 0 %}
<table class="table table-striped table-dark">
  <tr>
    <th>Request Number</th>
    <th>Lesson Type</th>
    <th>Lesson Date</th>
    <th>Lesson Duration</th>
    <th>Teacher</th>
  </tr>
  {% for key,value in unfulfilled_requests.items %}
    <tr>
      <td>{{value|get_lesson_request}}</td>
      <td>{{value|get_lesson}}</td>
      <td>{{value|get_lesson_date}}</td>
      <td>{{value|get_lesson_duration}}</td>
      <td>{{value|get_teacher}}</td>
      <td>
      <form method = "post" action="{% url 'delete_pending' %}">
          {% csrf_token %}
        <button type="submit" value = {{key.lesson_id}} name = "delete_id">Delete</button>
      </form>

      <form method = "get" action="{% url 'edit_pending'%}">
        <button type="submit" value = {{key.lesson_id}} name = "edit_id">Edit</button>
      </form>
    </td>

    </tr>
  {% endfor %}
</table>
{%  else %}
<table class="table table-striped table-dark">
  <tr>
    <th>Lesson</th>
    <th>Lesson Date</th>
    <th>Lesson Duration</th>
    <th>Teacher</th>
  </tr>
  {% for key,value in fullfilled_lessons.items %}
    <tr>
      <td>{{value|get_lesson}}</td>
      <td>{{value|get_lesson_date}}</td>
      <td>{{value|get_lesson_duration}}</td>
      <td>{{value|get_teacher}}</td>
    </tr>
  {% endfor %}
</table>
{%  endif %}
