{% extends 'base_content.html'%}

{% block content %}
<body style="background-color: #edede9">

  


<h1> THIS IS THE STUDENT FEED PAGE</h1>




<h2>{{greeting}}</h2>

{%  if unfulfilled_requests|length > 0 %}
<h3>Below is a view for requested lessons</h3>
<table class="table table-striped table-dark">
  <tr>
    <th>Request Number</th>
    <th>Lesson Type</th>
    <th>Lesson Date</th>
    <th>Lesson Duration</th>
    <th>Teacher</th>
  </tr>
  {% for key,value in unfulfilled_requests.items %}
    <tr>
      <td>{{value|get_lesson_request}}</td>
      <td>{{value|get_lesson}}</td>
      <td>{{value|get_lesson_date}}</td>
      <td>{{value|get_lesson_duration}}</td>
      <td>{{value|get_teacher}}</td>
      <td>
      <form method = "post" action='{% url 'delete_pending' key.lesson_id %}'>
          {% csrf_token %}
        <button type="submit">Delete</button>
      </form>

      <form method = "get" action='{% url 'edit_lesson' key.lesson_id %}'>
        <button type="submit">Edit</button>
      </form>
    </td>

    </tr>
  {% endfor %}
</table>
{% endif %}

{% if fullfilled_lessons|length > 0 %}
<h3>Below is a timetable for booked lessons</h3>
<table class="table table-striped table-dark">
  <tr>
    <th>Lesson</th>
    <th>Lesson Date</th>
    <th>Lesson Time</th>
    <th>Teacher Name</th>
  </tr>
  {% for key,value in fullfilled_lessons.items %}
    <tr>
      <td>{{value|get_lesson}}</td>
      <td>{{value|get_lesson_date}}</td>
      <td>{{value|get_lesson_duration}}</td>
      <td>{{value|get_teacher}}</td>
    </tr>
  {% endfor %}
</table>
<p>{{admin_email}}</p>
{% endif %}

{% if unfulfilled_requests|length == 0 and fullfilled_lessons|length == 0 %}
<h2>There are currently no items here</h2>
{%  endif %}




</body>

{% endblock %}
